<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§  ç‹—ç‹—æ™ºåŠ›æ¸¬é©—</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #b8d4b8 0%, #a8c9a8 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            max-width: 700px;
            width: 100%;
            padding: 40px;
            animation: fadeIn 0.5s ease-in;
            border: 4px solid #ff8c42;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .logo {
            text-align: center;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }

        h1 {
            color: #2c3e2c;
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #5a6b5a;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .input-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #2c3e2c;
            font-weight: 600;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 3px solid #ff8c42;
            border-radius: 15px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #ff6b1a;
            box-shadow: 0 0 0 3px rgba(255, 140, 66, 0.2);
        }

        .btn {
            background: #ff8c42;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 15px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 140, 66, 0.3);
            background: #ff7a2e;
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .progress-bar {
            height: 10px;
            background: #ffffff;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 2px solid #ff8c42;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff8c42 0%, #ffa560 100%);
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            color: #5a6b5a;
            margin-bottom: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .category-badge {
            display: inline-block;
            background: #fff3e6;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 20px;
            color: #ff8c42;
            font-weight: 600;
            border: 2px solid #ff8c42;
        }

        .question {
            font-size: 1.2em;
            color: #2c3e2c;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option-btn {
            background: white;
            border: 3px solid #e8f0e8;
            padding: 20px;
            border-radius: 15px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            color: #2c3e2c;
        }

        .option-btn:hover {
            border-color: #ff8c42;
            background: #fff8f2;
        }

        .option-btn.selected {
            border-color: #ff8c42;
            background: #fff3e6;
            font-weight: 600;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-secondary {
            background: #b8d4b8;
            color: #2c3e2c;
        }

        .btn-secondary:hover {
            background: #a8c9a8;
        }

        .result-icon {
            text-align: center;
            font-size: 100px;
            margin: 30px 0;
            animation: bounce 1s ease-in-out;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .result-title {
            text-align: center;
            font-size: 2em;
            color: #ff8c42;
            margin-bottom: 10px;
        }

        .result-score {
            text-align: center;
            font-size: 1.5em;
            color: #5a6b5a;
            margin-bottom: 20px;
        }

        .result-description {
            background: #f8fdf8;
            padding: 20px;
            border-radius: 15px;
            color: #2c3e2c;
            line-height: 1.8;
            margin-bottom: 20px;
            border: 3px solid #b8d4b8;
        }

        .result-message {
            background: linear-gradient(135deg, #fff3e6 0%, #ffe4c4 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            font-size: 1.1em;
            color: #2c3e2c;
            margin-bottom: 30px;
            font-weight: 500;
            border: 3px solid #ff8c42;
        }

        .share-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        #certificateCanvas {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 2em;
            }

            .subtitle {
                font-size: 1em;
            }

            .logo-icon {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="welcome" class="screen active">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="70" cy="80" r="45" fill="#ff8c42" stroke="#000" stroke-width="8"/>
                    <circle cx="130" cy="80" r="45" fill="#ff8c42" stroke="#000" stroke-width="8"/>
                    <text x="70" y="95" font-size="40" text-anchor="middle" fill="#000" font-weight="bold">âœ±</text>
                    <text x="130" y="95" font-size="40" text-anchor="middle" fill="#000" font-weight="bold">âœ±</text>
                    <ellipse cx="100" cy="130" rx="12" ry="15" fill="#000"/>
                    <path d="M 60 140 Q 70 155 85 150" stroke="#000" stroke-width="8" fill="none" stroke-linecap="round"/>
                    <path d="M 140 140 Q 130 155 115 150" stroke="#000" stroke-width="8" fill="none" stroke-linecap="round"/>
                </svg>
            </div>
            <h1>ğŸ§  ç‹—ç‹—æ™ºåŠ›æ¸¬é©—</h1>
            <p class="subtitle">30 é“é¡Œç›®ï¼Œæ­é–‹ä½ å®¶æ¯›å­©çš„å¤©æ‰æŒ‡æ•¸ï¼</p>
            
            <div class="input-group">
                <label for="dogName">è«‹è¼¸å…¥ä½ å®¶ç‹—ç‹—çš„åå­—ï¼š</label>
                <input type="text" id="dogName" placeholder="ä¾‹å¦‚ï¼šChewyã€åˆä¸€" required>
            </div>
            
            <button class="btn" onclick="startTest()">é–‹å§‹æ¸¬é©— ğŸ¾</button>
        </div>

        <div id="quiz" class="screen">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-text" id="progressText">ç¬¬ 1 é¡Œï¼Œå…± 30 é¡Œ</p>
            
            <span class="category-badge" id="categoryBadge">ğŸ¾ ç”Ÿæ´»æ‡‰å°èˆ‡æƒ…å¢ƒç†è§£</span>
            
            <div class="question" id="questionText"></div>
            
            <div class="options" id="optionsContainer"></div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn" style="display:none;">ä¸Šä¸€é¡Œ</button>
                <button class="btn" onclick="nextQuestion()" id="nextBtn" disabled>ä¸‹ä¸€é¡Œ</button>
            </div>
        </div>

        <div id="result" class="screen">
            <div class="result-icon" id="resultIcon"></div>
            <h2 class="result-title" id="resultTitle"></h2>
            <p class="result-score" id="resultScore"></p>
            <div class="result-description" id="resultDescription"></div>
            <div class="result-message" id="resultMessage"></div>
            
            <div class="share-buttons">
                <button class="btn" onclick="downloadCertificate()">ä¸‹è¼‰æ™ºåŠ›è­‰æ˜ ğŸ“œ</button>
                <button class="btn btn-secondary" onclick="restartTest()">é‡æ–°æ¸¬é©— ğŸ”„</button>
            </div>
        </div>
    </div>

    <canvas id="certificateCanvas" width="1200" height="800"></canvas>

    <script>
        var questions = [
            { category: 'ğŸ¾ ç”Ÿæ´»æ‡‰å°èˆ‡æƒ…å¢ƒç†è§£', q: 'ç•¶ä½ æ­£åœ¨å¹«ä½ çš„å°ç‹—æº–å‚™æ­£é¤æ™‚ï¼Œå°ç‹—æœ‰æ²’æœ‰ç†è§£ä¸¦ä¸”åšå‡ºåæ‡‰å‘¢ï¼Ÿ', a: 'ç›´æ¥è¡åˆ°å»šæˆ¿ç­‰å¾…', b: 'æœ‰æ„Ÿæ‡‰åˆ°æœ‰äº‹æƒ…è¦ç™¼ç”Ÿäº†', c: 'æ²’æœ‰åæ‡‰' },
            { category: 'ğŸ¾ ç”Ÿæ´»æ‡‰å°èˆ‡æƒ…å¢ƒç†è§£', q: 'ç•¶ä½ æ”¶æ‹¾èƒŒåŒ…æº–å‚™å‡ºé–€æ—…è¡Œï¼Œç‰ æœƒï¼Ÿ', a: 'æ—©æ—©å¯Ÿè¦ºï¼Œé–‹å§‹è·Ÿè‘—ä½ ', b: 'åˆ°æœ€å¾Œæ‰ç™¼ç¾', c: 'å®Œå…¨ä¸çŸ¥é“' },
            { category: 'ğŸ¾ ç”Ÿæ´»æ‡‰å°èˆ‡æƒ…å¢ƒç†è§£', q: 'è‹¥ä½ ç”¨æ‰‹æ©ŸéŒ„ä¸‹ç‰ çš„å«è²æ’­æ”¾ï¼Œç‰ æœƒï¼Ÿ', a: 'é¦¬ä¸Šå››è™•æ‰¾ã€Œè‡ªå·±ã€', b: 'æŠ¬é ­è½ä¸€ä¸‹', c: 'æ²’åæ‡‰' },
            { category: 'ğŸ¾ ç”Ÿæ´»æ‡‰å°èˆ‡æƒ…å¢ƒç†è§£', q: 'ç•¶ç‰ è½åˆ°ä½ èªªã€Œè¦å»æ•£æ­¥å—ï¼Ÿã€æ™‚ï¼Ÿ', a: 'ç§’è¡åˆ°é–€é‚Š', b: 'å…ˆè§€å¯Ÿä½ æ˜¯ä¸æ˜¯èªçœŸçš„', c: 'æ²’ç‰¹åˆ¥åæ‡‰' },
            { category: 'ğŸ¾ ç”Ÿæ´»æ‡‰å°èˆ‡æƒ…å¢ƒç†è§£', q: 'å°ç‹—å°ä¸åŒé£Ÿç‰©æœ‰æ²’æœ‰ä¸åŒç¨‹åº¦çš„æ„›å¥½ï¼Ÿ', a: 'å°æ–¼æŸäº›é£Ÿç‰©å¾ˆç˜‹ç‹‚', b: 'åˆ†å¾—å‡ºå·®åˆ¥æ²’æœ‰ç‰¹åˆ¥å–œå¥½', c: 'åˆ†ä¸å‡ºä¾†å·®åˆ¥' },
            { category: 'ğŸ¦´ å•é¡Œè§£æ±ºåŠ›', q: 'ä½ æŠŠé›¶é£Ÿæ”¾åœ¨é€æ˜ç›’å­è£¡ï¼Œç‹—ç‹—æ€éº¼è¾¦ï¼Ÿ', a: 'ç”¨çˆªå­æˆ–é¼»å­è©¦è‘—æ‰“é–‹', b: 'çœ‹è‘—ä½ æ±‚æ•‘', c: 'é¦¬ä¸Šæ”¾æ£„' },
            { category: 'ğŸ¦´ å•é¡Œè§£æ±ºåŠ›', q: 'ç•¶ç‰ çš„ç©å…·å¡åœ¨æ²™ç™¼ä¸‹æ™‚ï¼Ÿ', a: 'ç”¨çˆªå­æˆ–é¼»å­æ’¥å‡ºä¾†', b: 'å°è‘—æ²™ç™¼å«', c: 'è½‰é ­å»ç©åˆ¥çš„' },
            { category: 'ğŸ¦´ å•é¡Œè§£æ±ºåŠ›', q: 'ä½ ç”¨ç´™ç®±æ“‹ä½ç‰ çš„è·¯ï¼Œç‰ æœƒï¼Ÿ', a: 'æ‰¾å¦ä¸€é‚Šç¹éå»', b: 'å˜—è©¦æ’é–‹', c: 'å°±ç«™åœ¨åŸåœ°' },
            { category: 'ğŸ¦´ å•é¡Œè§£æ±ºåŠ›', q: 'ç•¶ä½ æŠŠé›¶é£Ÿè—åœ¨å®¶è£¡æŸå€‹è§’è½ç‰ æœƒä¸æœƒè‡ªå·±æ‰¾å‡ºä¾†ï¼Ÿ', a: 'é¦¬ä¸Šæ‰¾åˆ°', b: 'èèçœ‹å¹¾æ¬¡æ‰æ‰¾åˆ°', c: 'å®Œå…¨æ‰¾ä¸åˆ°' },
            { category: 'ğŸ¦´ å•é¡Œè§£æ±ºåŠ›', q: 'å°ç‹—æœƒä¸æœƒåœ¨å¤å¤©é‹å‹•å¾Œå£æ¸´æ™‚è‡ªå‹•å»å–æ°´ï¼Ÿ', a: 'æœƒè‡ªå·±æ¸´äº†å°±å»å–', b: 'å¶çˆ¾æœƒè‡ªå·±ä¾†è·Ÿæˆ‘è¦æ°´', c: 'éƒ½è¦æˆ‘æ‹¿æ°´çµ¦ä»–å–' },
            { category: 'ğŸ¶ ç¤¾äº¤ç†è§£åŠ›', q: 'ç•¶ä½ å‡è£å“­æ™‚ï¼Œç‹—ç‹—æœƒï¼Ÿ', a: 'ç«‹åˆ»é éä¾†å®‰æ’«ä½ ', b: 'è§€å¯Ÿå¹¾ç§’æ‰åæ‡‰', c: 'ä¸€è‡‰å›°æƒ‘' },
            { category: 'ğŸ¶ ç¤¾äº¤ç†è§£åŠ›', q: 'ç•¶é™Œç”Ÿäººå‘¼å–šç‰ åå­—æ™‚ï¼Œç‰ åæ‡‰ï¼Ÿ', a: 'çœ‹ä½ ç¢ºèªå†æ±ºå®š', b: 'çŒ¶è±«ä¸€ä¸‹', c: 'ç«‹åˆ»è·‘éå»' },
            { category: 'ğŸ¶ ç¤¾äº¤ç†è§£åŠ›', q: 'ç•¶ä½ æŒ‡è‘—æŸå€‹æ±è¥¿èªªã€Œçœ‹é‚£é‚Šï¼ã€ï¼Œç‰ æœƒï¼Ÿ', a: 'è·Ÿè‘—ä½ æŒ‡çš„æ–¹å‘çœ‹', b: 'çœ‹ä½ çš„æ‰‹æŒ‡', c: 'å®Œå…¨ä¸æ‡‚' },
            { category: 'ğŸ¶ ç¤¾äº¤ç†è§£åŠ›', q: 'ç•¶ä½ çªç„¶æ”¹è®Šè·¯ç·šèµ°åˆ¥çš„æ–¹å‘ï¼Œç‰ æœƒï¼Ÿ', a: 'ç«‹åˆ»è·Ÿä¸Š', b: 'éå¹¾ç§’æ‰ç™¼ç¾', c: 'é‚„åœ¨åŸè·¯ç­‰ä½ ' },
            { category: 'ğŸ¶ ç¤¾äº¤ç†è§£åŠ›', q: 'ç•¶å®¶ä¸­å…¶ä»–äººå«ç‰ åå­—æ™‚ï¼Œç‰ æ˜¯å¦åˆ†è¾¨å‡ºèª°åœ¨å«ï¼Ÿ', a: 'æœƒ', b: 'å¶çˆ¾æœƒææ··', c: 'éƒ½è¦çœ‹ä¸€çœ¼æ‰çŸ¥é“' },
            { category: 'ğŸ§© å­¸ç¿’åŠ›', q: 'å­¸æ–°æŒ‡ä»¤æ™‚ï¼ˆå¦‚ã€Œåä¸‹ã€ï¼‰ï¼Œç‰ å¹³å‡å¹¾æ¬¡èƒ½å­¸æœƒï¼Ÿ', a: '1-3 æ¬¡', b: '4-7 æ¬¡', c: '8 æ¬¡ä»¥ä¸Š' },
            { category: 'ğŸ§© å­¸ç¿’åŠ›', q: 'è‹¥ä½ æ›æˆä¸åŒèªæ°£èªªæŒ‡ä»¤ï¼ˆå¦‚è¼•è² vs åš´è‚…ï¼‰ï¼Œç‰ èƒ½ç†è§£å—ï¼Ÿ', a: 'æœƒåšå‡ºæ­£ç¢ºçš„æŒ‡ä»¤', b: 'æœ‰æ™‚æœƒæ··äº‚', c: 'è½ä¸æ‡‚' },
            { category: 'ğŸ§© å­¸ç¿’åŠ›', q: 'ç•¶ä½ æ•™ç‰ æ–°èŠ±æ¨£ï¼ˆå¦‚è½‰åœˆï¼‰ï¼Œç‰ çš„æ…‹åº¦ï¼Ÿ', a: 'å¾ˆå¿«æŒæ¡ä¸¦æ¨‚åœ¨å…¶ä¸­', b: 'æœ‰é»çŒ¶è±«ä½†æœƒå˜—è©¦', c: 'é¦¬ä¸Šè½‰èº«èµ°é–‹' },
            { category: 'ğŸ§© å­¸ç¿’åŠ›', q: 'è‹¥ä½ èªªã€Œä¸æ˜¯é€™å€‹ã€ï¼Œç‰ æœƒåœæ­¢å‹•ä½œå—ï¼Ÿ', a: 'é¦¬ä¸Šåœä¸‹', b: 'éå¹¾ç§’æ‰åæ‡‰', c: 'è½ä¸æ‡‚' },
            { category: 'ğŸ§© å­¸ç¿’åŠ›', q: 'ç•¶ä½ æ›äº†æ–°çš„ç©å…·åç¨±ï¼ˆå¦‚ã€Œçƒçƒã€â†’ã€Œå’¬å’¬ã€ï¼‰ï¼Œç‰ èƒ½è¨˜å¾—å—ï¼Ÿ', a: 'å¾ˆå¿«å°±è¨˜èµ·æ–°åå­—', b: 'è¦ç·´å¹¾æ¬¡', c: 'å®Œå…¨æ··äº‚' },
            { category: 'ğŸ¾ è§€å¯ŸåŠ›èˆ‡è¨˜æ†¶åŠ›', q: 'ç•¶ä½ å‡è£ä¸Ÿçƒä½†å…¶å¯¦æ²’ä¸Ÿæ™‚ï¼Œç‹—ç‹—çš„åæ‡‰æ˜¯ï¼Ÿ', a: 'é¦¬ä¸Šçœ‹å‡ºä½ åœ¨é¨™ç‰ ', b: 'çœ‹äº†ä¸€ä¸‹åœ°æ¿å¾Œæ‰ç™¼ç¾', c: 'ä¸€ç›´æ‰¾çƒåˆ°è™•è·‘' },
            { category: 'ğŸ¾ è§€å¯ŸåŠ›èˆ‡è¨˜æ†¶åŠ›', q: 'ä½ æŠŠé›¶é£Ÿè—åœ¨å…©å€‹æ¯å­å…¶ä¸­ä¹‹ä¸€ï¼Œç‹—ç‹—èƒ½è¨˜å¾—åœ¨å“ªå€‹æ¯å­è£¡å—ï¼Ÿ', a: 'ç¸½æ˜¯è¨˜å¾—', b: 'æœ‰æ™‚è¨˜å¾—ã€æœ‰æ™‚å¿˜', c: 'å®Œå…¨å¿˜è¨˜' },
            { category: 'ğŸ¾ è§€å¯ŸåŠ›èˆ‡è¨˜æ†¶åŠ›', q: 'ç•¶ä½ æ›äº†æ–°é«®å‹ï¼Œç‹—ç‹—æ˜¯å¦èªå‡ºä½ ï¼Ÿ', a: 'é¦¬ä¸ŠçŸ¥é“æ˜¯ä½ ', b: 'å…ˆçŒ¶è±«å†é è¿‘', c: 'ä»¥ç‚ºæ˜¯é™Œç”Ÿäºº' },
            { category: 'ğŸ¾ è§€å¯ŸåŠ›èˆ‡è¨˜æ†¶åŠ›', q: 'ç•¶ä½ ç§»å‹•ç‰ å¸¸ç¡çš„æ¯¯å­/åºŠ/ç± å­åˆ°åˆ¥çš„åœ°æ–¹ï¼Œç‰ æœƒï¼Ÿ', a: 'ç«‹åˆ»æ‰¾åˆ°ä¸¦èººä¸Šå»', b: 'ç¨å¾®èä¸€èæ‰èººä¸‹', c: 'å®Œå…¨æ²’æ³¨æ„' },
            { category: 'ğŸ¾ è§€å¯ŸåŠ›èˆ‡è¨˜æ†¶åŠ›', q: 'ç•¶ä½ æ•…æ„èµ°å»é–€å£æ‹¿ç‰½ç¹©ï¼Œç‹—ç‹—åæ‡‰æ˜¯ï¼Ÿ', a: 'ç«‹åˆ»èˆˆå¥®è·³èµ·ä¾†', b: 'çœ‹ä½ å¹¾ç§’æ‰èµ·ä¾†', c: 'å®Œå…¨æ²’åæ‡‰' },
            { category: 'ğŸ• ç©ºé–“èˆ‡æ„ŸçŸ¥èƒ½åŠ›', q: 'ç•¶ä½ è—é›¶é£Ÿåœ¨å¸ƒä¸‹é¢ï¼Œç‰ æœƒï¼Ÿ', a: 'é¦¬ä¸Šæ€èµ·å¸ƒ', b: 'èä¸€èæ‰å‹•ä½œ', c: 'æ”¾æ£„' },
            { category: 'ğŸ• ç©ºé–“èˆ‡æ„ŸçŸ¥èƒ½åŠ›', q: 'ç‹—ç‹—æ˜¯å¦æ›¾è®“è‡ªå·±ä¸å°å¿ƒå¡åœ¨æŸè™•', a: 'ä¸æ›¾ç™¼ç”Ÿ', b: 'æ›¾ç¶“å·®é»è¢«å¡ä½ä½†è‡ªå·±æ™è„«', c: 'å¸¸å¸¸å¡ä½è€Œä¸”éœ€è¦æˆ‘å¹«ä»–è§£è„«' },
            { category: 'ğŸ• ç©ºé–“èˆ‡æ„ŸçŸ¥èƒ½åŠ›', q: 'ç•¶ç‰ çœ‹åˆ°é¡å­è£¡çš„è‡ªå·±ï¼Œç‰ æœƒï¼Ÿ', a: 'è§€å¯Ÿä¸€ä¸‹å¾Œä¸åœ¨æ„', b: 'å å«å¹¾ä¸‹', c: 'å°é¡å­ç”Ÿæ°£' },
            { category: 'ğŸ• ç©ºé–“èˆ‡æ„ŸçŸ¥èƒ½åŠ›', q: 'ç•¶ä½ åœ¨å¦ä¸€å€‹æˆ¿é–“å«ç‰ åå­—ï¼Œç‰ èƒ½æ‰¾åˆ°ä½ å—ï¼Ÿ', a: 'é¦¬ä¸Šæ‰¾åˆ°', b: 'è½ä¸€ä¸‹æ–¹å‘æ‰ä¾†', c: 'åˆ°è™•äº‚æ‰¾' },
            { category: 'ğŸ• ç©ºé–“èˆ‡æ„ŸçŸ¥èƒ½åŠ›', q: 'ç•¶ä½ æ›äº†å®¶è£¡çš„å®¶å…·æ“ºè¨­æ”¹è®Šäº†ä»–çš„ç”Ÿæ´»ç¿’æ…£ï¼Œç‰ æœƒï¼Ÿ', a: 'å¾ˆå¿«ç¿’æ…£æ–°ä½ç½®', b: 'éœ€è¦å¹¾å¤©é©æ‡‰', c: 'æ˜é¡¯ä¸é©æ‡‰' }
        ];

        var levels = [
            { min: 30, max: 60, icon: 'ğŸŒ¼', title: 'å°å¯æ„›æ¢ç´¢å®¶', desc: 'å°ä¸–ç•Œå……æ»¿å¥½å¥‡ä½†è¡Œå‹•æ´¾ä¸å¼·ï¼Œå¸¸ç”¨ã€ŒèŒæ¨£ã€è§£æ±ºå•é¡Œã€‚å¯èƒ½é‚„éœ€è¦ä¸€é»æ™‚é–“ç†è§£æŒ‡ä»¤ï¼Œä½†ç‰ çš„è€å¿ƒèˆ‡è¦ªå’ŒåŠ›çµ•å°æ»¿åˆ†ã€‚', msgs: ['ç”¨ç„¡è¾œå¤§çœ¼è­‰æ˜ï¼šå¯æ„›å°±æ˜¯æœ€å¼·æ­¦å™¨ï¼ğŸ’•', 'çš„äººç”Ÿå“²å­¸ï¼šç‚ºä»€éº¼è¦åŠªåŠ›ï¼Ÿèººè‘—ç­‰æ‘¸æ‘¸ä¸å¥½å—ï¼ŸğŸ˜Œ'] },
            { min: 61, max: 90, icon: 'ğŸ•', title: 'é–‹æœ—å­¸ç¿’ç”Ÿ', desc: 'è§€å¯ŸåŠ›èˆ‡åæ‡‰åŠ›ä¸éŒ¯ï¼Œå¶çˆ¾æœƒåˆ†å¿ƒï¼Œä½†åªè¦é¡˜æ„å­¸å°±é€²æ­¥å¾ˆå¿«ã€‚æ‡‚å¾—ç”¨çœ¼ç¥è®€ç©ºæ°£ï¼Œæ˜¯äººé¡æƒ…ç·’çš„å¥½æ„Ÿæ‡‰å™¨ã€‚', msgs: ['æ­£åœ¨ç”¨å¿ƒæ„Ÿå—ä½ çš„æ¯å€‹æƒ…ç·’è®ŠåŒ– ğŸ’™', 'å­¸ç¿’é€Ÿåº¦å¿«ï¼Œå°±æ˜¯å¶çˆ¾æœƒè¢«é›¶é£Ÿåˆ†å¿ƒè€Œå·² ğŸ˜‹'] },
            { min: 81, max: 110, icon: 'ğŸ§ ', title: 'æ©Ÿéˆå¤¥ä¼´å‹', desc: 'æ€è€ƒéˆæ´»ã€èƒ½èˆ‰ä¸€åä¸‰ï¼Œæ‡‚å¾—è§€å¯Ÿæƒ…å¢ƒä¸¦åšå‡ºå°æ‡‰è¡Œå‹•ã€‚å­¸æ–°æŒ‡ä»¤é€Ÿåº¦å¿«ï¼Œä¹ŸçŸ¥é“ä»€éº¼æ™‚å€™è©²ã€Œè£å‚»ã€è¨æ‘¸æ‘¸ã€‚', msgs: ['çš„æ¸¬é©—çµæœæ˜¯ ğŸ’¡ æ©Ÿéˆå¤¥ä¼´å‹ï¼å·²ç¶“å­¸æœƒä»€éº¼æ™‚å€™è©²è£å‚»äº† ğŸ˜', 'åœ¨æ€è€ƒæ€éº¼ç”¨æœ€å°‘åŠ›æ°£ç²å¾—æœ€å¤šé›¶é£Ÿ ğŸ§ âœ¨'] },
            { min: 91, max: 125, icon: 'ğŸš€', title: 'è°æ˜é«˜æç”Ÿ', desc: 'ä¸åªæœƒå­¸ï¼Œé‚„æœƒè§€å¯Ÿä½ ã€æ¸¬è©¦ä½ ã€‚èƒ½è‡ªå·±æ‰¾è§£æ³•ã€ç†è§£å› æœï¼Œæ˜¯å°å°å•é¡Œè§£æ±ºé«˜æ‰‹ã€‚å¯èƒ½æœƒã€Œå¤ªè°æ˜ã€åˆ°è®“é£¼ä¸»å•å£ç„¡è¨€ã€‚', msgs: ['å·²ç¶“é–‹å§‹è§€å¯Ÿä½ çš„è¡Œç‚ºæ¨¡å¼äº† ğŸ”', 'å¯èƒ½æ­£åœ¨æ¸¬è©¦ä½ çš„åº•ç·šåœ¨å“ªè£¡ ğŸ¤“'] },
            { min: 110, max: 135, icon: 'ğŸŒŸ', title: 'ç‹—ç•Œå¤©æ‰ç‹', desc: 'è¶…é«˜ç†è§£åŠ›èˆ‡å­¸ç¿’é€Ÿåº¦ï¼Œæ‡‚å¾—è§€å¯Ÿäººé¡è¡¨æƒ…ã€é æ¸¬è¡Œå‹•ã€‚èƒ½è‡ªå·±è¨­è¨ˆéŠæˆ²æˆ–ç­–ç•¥ï¼Œæ˜¯çœŸæ­£èƒ½ã€Œè·Ÿäººæºé€šã€çš„ç‹—ç‹—å¤©æ‰ï¼', msgs: ['çš„æ™ºå•†å¯èƒ½æ¯”ä¸»äººé‚„é«˜â€¦è©²æ“”å¿ƒå—ï¼ŸğŸ‘‘ğŸ¤”', 'ï¼Œå‚³èªªä¸­çš„ ğŸŒŸ ç‹—ç•Œå¤©æ‰ç‹ï¼å¯èƒ½å·²ç¶“åœ¨ç­–åŠƒçµ±æ²»ä¸–ç•Œäº† ğŸŒ'] }
        ];

        var currentQuestion = 0;
        var answers = [];
        var dogName = '';
        var totalScore = 0;
        var currentLevel = null;

        function startTest() {
            dogName = document.getElementById('dogName').value.trim();
            if (!dogName) {
                alert('è«‹è¼¸å…¥ç‹—ç‹—çš„åå­—ï¼');
                return;
            }
            showScreen('quiz');
            loadQuestion();
        }

        function loadQuestion() {
            var q = questions[currentQuestion];
            document.getElementById('categoryBadge').textContent = q.category;
            document.getElementById('questionText').textContent = q.q;
            document.getElementById('progressText').textContent = 'ç¬¬ ' + (currentQuestion + 1) + ' é¡Œï¼Œå…± 30 é¡Œ';
            document.getElementById('progressFill').style.width = ((currentQuestion + 1) / 30 * 100) + '%';

            var optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '<button class="option-btn" onclick="selectOption(0)">A. ' + q.a '</button>' +
                '<button class="option-btn" onclick="selectOption(1)">B. ' + q.b '</button>' +
                '<button class="option-btn" onclick="selectOption(2)">C. ' + q.c '</button>';

            if (answers[currentQuestion] !== undefined) {
                optionsContainer.children[answers[currentQuestion]].classList.add('selected');
                document.getElementById('nextBtn').disabled = false;
            } else {
                document.getElementById('nextBtn').disabled = true;
            }

            document.getElementById('prevBtn').style.display = currentQuestion > 0 ? 'block' : 'none';
        }

        function selectOption(optionIndex) {
            answers[currentQuestion] = optionIndex;
            var buttons = document.querySelectorAll('.option-btn');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('selected');
            }
            buttons[optionIndex].classList.add('selected');
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (currentQuestion < 29) {
                currentQuestion++;
                loadQuestion();
            } else {
                showResult();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        function showResult() {
            totalScore = 0;
            for (var i = 0; i < answers.length; i++) {
                totalScore += (3 - answers[i]);
            }
            
            for (var i = 0; i < levels.length; i++) {
                if (totalScore >= levels[i].min && totalScore <= levels[i].max) {
                    currentLevel = levels[i];
                    break;
                }
            }
            
            document.getElementById('resultIcon').textContent = currentLevel.icon;
            document.getElementById('resultTitle').textContent = currentLevel.title;
            document.getElementById('resultScore').textContent = dogName + ' çš„æ™ºå•†å¾—åˆ†ï¼š' + totalScore + ' åˆ†';
            document.getElementById('resultDescription').textContent = currentLevel.desc;
            
            var randomMsg = currentLevel.msgs[Math.floor(Math.random() * currentLevel.msgs.length)];
            document.getElementById('resultMessage').textContent = dogName + ' ' + randomMsg;
            
            showScreen('result');
        }

        function downloadCertificate() {
            var canvas = document.getElementById('certificateCanvas');
            var ctx = canvas.getContext('2d');
            
            var gradient = ctx.createLinearGradient(0, 0, 1200, 800);
            gradient.addColorStop(0, '#b8d4b8');
            gradient.addColorStop(1, '#a8c9a8');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 1200, 800);
            
            ctx.strokeStyle = '#ff8c42';
            ctx.lineWidth = 20;
            ctx.strokeRect(40, 40, 1120, 720);
            
            ctx.strokeStyle = '#2c3e2c';
            ctx.lineWidth = 3;
            ctx.strokeRect(60, 60, 1080, 680);
            
            ctx.fillStyle = '#2c3e2c';
            ctx.font = 'bold 80px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('ç‹—ç‹—æ™ºåŠ›æ¸¬é©—è­‰æ˜æ›¸', 600, 150);
            
            drawDogLogo(ctx, 600, 250);
            
            ctx.font = 'bold 50px Arial';
            ctx.fillStyle = '#ff8c42';
            ctx.fillText(dogName, 600, 380);
            
            ctx.font = '36px Arial';
            ctx.fillStyle = '#2c3e2c';
            ctx.fillText('åœ¨ç‹—ç‹—æ™ºåŠ›æ¸¬é©—ä¸­è¡¨ç¾å„ªç•°', 600, 440);
            
            ctx.font = 'bold 48px Arial';
            ctx.fillStyle = '#ff8c42';
            ctx.fillText(currentLevel.title, 600, 520);
            
            ctx.font = '40px Arial';
            ctx.fillStyle = '#2c3e2c';
            ctx.fillText('æ™ºå•†å¾—åˆ†ï¼š' + totalScore + ' åˆ†', 600, 580);
            
            var today = new Date();
            var dateStr = today.getFullYear() + 'å¹´' + (today.getMonth()+1) + 'æœˆ' + today.getDate() + 'æ—¥';
            ctx.font = '28px Arial';
            ctx.fillStyle = '#5a6b5a';
            ctx.fillText('é ’ç™¼æ—¥æœŸï¼š' + dateStr, 600, 680);
            
            var link = document.createElement('a');
            link.download = dogName + '_æ™ºåŠ›æ¸¬é©—è­‰æ˜.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        function drawDogLogo(ctx, x, y) {
            ctx.fillStyle = '#ff8c42';
            ctx.beginPath();
            ctx.arc(x - 60, y, 45, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 6;
            ctx.stroke();
            
            ctx.fillStyle = '#ff8c42';
            ctx.beginPath();
            ctx.arc(x + 60, y, 45, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 6;
            ctx.stroke();
            
            ctx.fillStyle = '#000';
            ctx.font = 'bold 40px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('*', x - 60, y + 12);
            ctx.fillText('*', x + 60, y + 12);
            
            ctx.fillStyle = '#000';
            ctx.beginPath();
            ctx.ellipse(x, y + 50, 12, 15, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 6;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(x - 40, y + 60);
            ctx.quadraticCurveTo(x - 30, y + 75, x - 15, y + 70);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(x + 40, y + 60);
            ctx.quadraticCurveTo(x + 30, y + 75, x + 15, y + 70);
            ctx.stroke();
        }

        function shareResult() {
            var text = dogName + ' çš„æ™ºå•†æ¸¬é©—çµæœï¼š\n' + currentLevel.icon + ' ' + currentLevel.title + 'ï¼ˆ' + totalScore + ' åˆ†ï¼‰\n\nç«‹å³æ¸¬è©¦ä½ çš„ç‹—ç‹—';
            
            if (navigator.share) {
                navigator.share({ text: text });
            } else {
                navigator.clipboard.writeText(text);
                alert('çµæœå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
            }
        }

        function restartTest() {
            currentQuestion = 0;
            answers = [];
            dogName = '';
            document.getElementById('dogName').value = '';
            showScreen('welcome');
        }

        function showScreen(screenId) {
            var screens = document.querySelectorAll('.screen');
            for (var i = 0; i < screens.length; i++) {
                screens[i].classList.remove('active');
            }
            document.getElementById(screenId).classList.add('active');
        }
    </script>
</body>
</html>
